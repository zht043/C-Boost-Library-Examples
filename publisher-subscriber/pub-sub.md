check out this link: https://github.com/zht043/inter-thread-publisher-subscriber-cpp